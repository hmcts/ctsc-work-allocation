databaseChangeLog:
  - changeSet:
      id: 1
      author: akiss
      changes:
        - createTable:
            tableName: last_run_time
            columns:
              - column:
                  name: id
                  type: int
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: last_run
                  type: timestamp
                  constraints:
                    nullable: false
  - changeSet:
      id: 2
      author: akiss
      changes:
        - sql: >
            CREATE SEQUENCE logging_event_id_seq MINVALUE 1 START 1;

            CREATE TABLE logging_event
              (
                timestmp         BIGINT NOT NULL,
                formatted_message  TEXT NOT NULL,
                logger_name       VARCHAR(254) NOT NULL,
                level_string      VARCHAR(254) NOT NULL,
                thread_name       VARCHAR(254),
                reference_flag    SMALLINT,
                arg0              VARCHAR(254),
                arg1              VARCHAR(254),
                arg2              VARCHAR(254),
                arg3              VARCHAR(254),
                caller_filename   VARCHAR(254) NOT NULL,
                caller_class      VARCHAR(254) NOT NULL,
                caller_method     VARCHAR(254) NOT NULL,
                caller_line       CHAR(4) NOT NULL,
                event_id          BIGINT DEFAULT nextval('logging_event_id_seq') PRIMARY KEY
              );

            CREATE TABLE logging_event_property
              (
                event_id	      BIGINT NOT NULL,
                mapped_key        VARCHAR(254) NOT NULL,
                mapped_value      VARCHAR(1024),
                PRIMARY KEY(event_id, mapped_key),
                FOREIGN KEY (event_id) REFERENCES logging_event(event_id)
              );

            CREATE TABLE logging_event_exception
              (
                event_id         BIGINT NOT NULL,
                i                SMALLINT NOT NULL,
                trace_line       VARCHAR(254) NOT NULL,
                PRIMARY KEY(event_id, i),
                FOREIGN KEY (event_id) REFERENCES logging_event(event_id)
              );
  - changeSet:
      id: 3
      author: akiss
      changes:
        - sql: >
            DROP TABLE logging_event_property;
            CREATE TABLE logging_event_property
              (
                event_id	      BIGINT NOT NULL,
                mapped_key        VARCHAR(254) NOT NULL,
                mapped_value      VARCHAR(1024),
                PRIMARY KEY(event_id, mapped_key),
                FOREIGN KEY (event_id) REFERENCES logging_event(event_id) ON DELETE CASCADE
              );
            DROP TABLE logging_event_exception;
            CREATE TABLE logging_event_exception
              (
                event_id         BIGINT NOT NULL,
                i                SMALLINT NOT NULL,
                trace_line       VARCHAR(254) NOT NULL,
                PRIMARY KEY(event_id, i),
                FOREIGN KEY (event_id) REFERENCES logging_event(event_id) ON DELETE CASCADE
              );

  - changeSet:
      id: 4
      author: akiss
      changes:
        - createTable:
            tableName: task
            columns:
              - column:
                  name: id
                  type: varchar(50)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: state
                  type: varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name: jurisdiction
                  type: varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name: case_type_id
                  type: varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name: last_modified_date
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: sent
                  type: boolean
                  defaultValue: false
                  constraints:
                    nullable: false

